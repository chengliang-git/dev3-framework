server:
  port: 8083
  servlet:
    context-path: /case-transfer

spring:
  application:
    name: guanwei-tles-case-transfer
  profiles:
    active: dev,cap

# JWT配置
jwt:
  secret: guanwei-tles-case-transfer-jwt-secret-key-2024
  expiration: 86400000  # 24小时
  header: Authorization
  prefix: "Bearer "

# 框架配置
framework:
  security:
    permit-all-paths:
      - /api/cases/**
      - /api/case-transfer/**
      - /doc.html
      - /webjars/**
      - /swagger-resources/**
      - /v3/api-docs/**
      - /actuator/**
    cors:
      allowed-origins: "*"
      allowed-methods: "*"
      allowed-headers: "*"
      allow-credentials: true
      max-age: 3600

# Knife4j API文档配置
knife4j:
  enable: true
  setting:
    language: zh_cn
    enable-version: true
    enable-reload-cache-parameter: true
    enable-after-script: true
    enable-filter-multipart-api-method-type: POST
    enable-filter-multipart-apis: false
    enable-request-cache: true
    enable-host: false
    enable-host-text: http://localhost:8083
    enable-home-custom: false
    # 启用安全配置
    enable-security: true
  documents:
    - group: 案件转存API
      name: 案件数据转存服务接口文档
      locations: classpath:markdown/*
    - group: 认证指南
      name: JWT认证使用指南
      locations: classpath:markdown/jwt-auth-guide.md

# MyBatis Plus配置
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  type-aliases-package: com.guanwei.tles.casetransfer.entity.oracle
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      logic-delete-field: delFlag
      logic-delete-value: 1
      logic-not-delete-value: 0

# CAP消息配置
# 使用 spring.profiles.active=cap 来激活CAP配置
# 具体配置请参考 application-cap.yml

# 日志配置
logging:
  level:
    com.guanwei.tles.casetransfer: DEBUG
    com.guanwei.framework: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"
  file:
    name: logs/case-transfer.log
  logback:
    rollingpolicy:
      max-file-size: 100MB
      max-history: 30

# 管理端点配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
